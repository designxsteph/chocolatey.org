@model ResourceViewModel

@{
    if (Model.Type.Contains("Feature") && Model.Tags.Contains("12-days-of-chocolatey"))
    {
        ViewBag.Title = "12 Days of Chocolatey- " + Model.Title;
    }
    else
    {
        ViewBag.Title = Model.Type + "- " + Model.Title;
    }
    Bundles.Reference("content/css/chocolatey.bundle.min.css");
    Bundles.Reference("Scripts/main");
}

@section ExtraHeaders {
    @if (Model.Type.Contains("Customer Success Story"))
    {
        <link rel="canonical" href="https://chocolatey.org/resources/success-stories/@Model.UrlPath" />
    }
    else if (Model.Type.Contains("Video"))
    {
        <link rel="canonical" href="https://chocolatey.org/resources/videos/@Model.UrlPath" />
    }
    else if (Model.Type.Contains("Case Study"))
    {
        <link rel="canonical" href="https://chocolatey.org/resources/case-studies/@Model.UrlPath" />
    }
    else if (Model.Type.Contains("Feature") && Model.Tags.Contains("12-days-of-chocolatey"))
    {
        <link rel="canonical" href="https://chocolatey.org/resources/12-days-of-chocolatey/@Model.UrlPath" />
    }
    else if (Model.Type.Contains("Feature"))
    {
        <link rel="canonical" href="https://chocolatey.org/resources/features/@Model.UrlPath" />
    }
    @if (!string.IsNullOrWhiteSpace(Model.Summary))
    {
        <meta property="og:description" content="@Model.Summary" />
        <meta property="description" content="@Model.Summary" />
    }
    <div id="fb-root"></div>
    <script>
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
}

@Html.Partial("~/Views/Shared/_ResourceSubNavigation.cshtml")
<section class="py-3 py-lg-5">
    <div class="container">
        @if (Model.Type.Contains("Customer Success Story"))
        {
            <h1>@Model.Name at @Model.Company</h1>
        }
        else if (Model.Type.Contains("Video") || Model.Type.Contains("Case Study") || Model.Type.Contains("Feature"))
        {
            <h1>@Model.Title</h1>
        }
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "home"})">Resources</a></li>
                @if (Model.Type.Contains("Customer Success Story"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "success-stories"})">Customer Success Stories</a></li>
                }
                else if (Model.Type.Contains("Video"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "videos"})">Videos</a></li>
                }
                else if (Model.Type.Contains("Case Study"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "case-studies"})">Case Studies</a></li>
                }
                else if (Model.Type.Contains("Feature") && Model.Tags.Contains("c4b-feature"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "features"})#c4b">C4B Features</a></li>
                }
                else if (Model.Type.Contains("Feature") && Model.Tags.Contains("open-source-feature"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "features"})#open-source">Open Source Features</a></li>
                }
                else if (Model.Type.Contains("Feature") && Model.Tags.Contains("12-days-of-chocolatey"))
                {
                    <li class="breadcrumb-item"><a href="@Url.RouteUrl(RouteName.Resources, new {resourceType = "12-days-of-chocolatey"})">12 Days of Chocolatey</a></li>
                }
                @if (Model.Type.Contains("Customer Success Story"))
                {
                    <li class="breadcrumb-item active" aria-current="page">@Model.Name at @Model.Company</li>
                }
                else
                {
                    <li class="breadcrumb-item active" aria-current="page">@Model.Title</li>
                }
            </ol>
        </nav>
        <div class="row">
            <div class="col-12 mx-auto">
                @if (!String.IsNullOrEmpty(Model.Video))
                {
                    <div class="ratio ratio-16x9">
                        <iframe src="https://www.youtube.com/embed/@Model.Video" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                }
                else if (!String.IsNullOrEmpty(Model.InternalVideo))
                {
                    <video class="ratio ratio-16x9" controls>
                        <source src="@Url.Content("~/content/images/" + Model.InternalVideo)" type="video/mp4">
                    </video>
                }
            </div>
            @if (Model.Type.Contains("Customer Success Story"))
            {
                <div class="col-lg-10 mx-auto pt-3 pt-lg-5 text-center">
                    @if (!String.IsNullOrEmpty(Model.Quote))
                    {
                        <q class="h3 pb-4">@Model.Quote</q>
                    }
                    <h2 class="text-primary"><strong>@Model.Company</strong></h2>
                    <p class="mb-0"><i>@Model.Name, @Model.Position</i></p>
                </div>
            }
            @if (!Model.Type.Contains("Customer Success Story") && String.IsNullOrEmpty(Model.Post) || Model.Type.Contains("Feature") && Model.Tags.Contains("12-days-of-chocolatey"))
            {
                <div class="col-12 mx-auto pt-3 pt-lg-5 text-center">
                    <h5>@Html.Raw(Model.Summary)</h5>
                </div>

                if (!String.IsNullOrEmpty(Model.Name))
                {
                    <div class="col-12 mx-auto pt-3 text-center">
                        <p>@Html.Raw(Model.Name)</p>
                    </div>
                }
            }
            @if (!String.IsNullOrEmpty(Model.Post))
            {
                <div class="col-12 mx-auto pt-3 pt-lg-5">
                    @Html.Raw(Model.Post)
                </div>
            }
        </div>
        @if (Model.Type.Contains("Feature") && Model.Tags.Contains("c4b-feature"))
        {
            <div class="row">
                @*Loop through videos*@
            </div>
        }
    </div>
</section>