@* Generator: MvcHelper Namespace: NuGetGallery*@

@using System.Configuration
@using System.Linq;
@using System.Collections;
@using System.Web;
@using System.Web.Mvc;
@using Microsoft.Web.Helpers;
@using NuGetGallery;
@using NuGetGallery.MvcOverrides

@helper PreviousNextPager(IPreviousNextPager pager) {
    if (pager.HasNextPage || pager.HasPreviousPage) {
        <nav class="d-flex justify-content-center" aria-label="Navigate to previous or next page of results">
            <div class="btn-group" role="group" aria-label="Navigate to previous or next page of results">
                @if (pager.HasPreviousPage)
                {
                    <a role="button" href="@pager.PreviousPageUrl" class="btn btn-outline-primary">Previous</a>
                }
                else
                {
                    <button type="button" class="btn btn-outline-primary" aria-disabled="true" disabled>Previous</button>

                }
                @if (pager.HasNextPage)
                {
                    <a role="button" href="@pager.NextPageUrl" class="btn btn-outline-primary">Next</a>
                }
                else
                {
                    <button type="button" class="btn btn-outline-primary" aria-disabled="true" disabled>Next</button>

                }
            </div>
        </nav>
    }
}

@helper Option(string value, string label, string currentValue) {
    <option value="@value" @if (value == currentValue) {<text>selected="selected"</text>}>@label</option>    
}

@helper OwnersGravatar(IEnumerable<User> owners, int size, UrlHelper url, bool showName = true) {
    <ul class="list-unstyled mb-2 mb-md-0">
    @foreach (var owner in owners) {
        <li>
            @ViewHelpers.OwnerGravatar(owner, size, url, showName)
        </li>
    }  
    </ul>  
}

@helper OwnerGravatar(User owner, int size, UrlHelper url, bool showName = true) {
    <a class="d-flex align-items-center mb-2" href="@url.Action(MVC.Users.Profiles(owner.Username))" title="@owner.Username">
        @if(!string.IsNullOrEmpty(owner.EmailAddress)) { @GravatarImage(owner.EmailAddress, owner.Username, size) }
        @if (showName) {
            <span class="ms-2">@owner.Username</span>
        }
    </a>
}

@helper OwnersGravatarListPackages(IEnumerable<User> owners, int size, UrlHelper url) {
    <ul class="list-unstyled list-inline mb-0">
    @foreach (var owner in owners) {
        <li class="list-inline-item">
            <a href="@url.Action(MVC.Users.Profiles(owner.Username))" title="@owner.Username">
                @if (!string.IsNullOrEmpty(owner.EmailAddress))
                {@GravatarImage(owner.EmailAddress, owner.Username, size)}
            </a>
        </li>
    }  
    </ul>  
}

@helper GravatarImage(string email, string username, int size) {
    if (string.IsNullOrWhiteSpace(email)) {email = "default";}
    var gravatarHtml = Gravatar.GetHtml(email, size, "retro", GravatarRating.G, attributes: new { width = size, height = size, title = username, @class = "rounded-circle" });
    if (gravatarHtml != null && AppHarbor.IsSecureConnection(new HttpContextWrapper(HttpContext.Current)))
    {
        gravatarHtml = new HtmlString(gravatarHtml.ToHtmlString().Replace("http://www.gravatar.com/", "https://secure.gravatar.com/"));
    }
    @gravatarHtml
}